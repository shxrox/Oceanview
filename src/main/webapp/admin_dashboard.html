<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Admin Dashboard</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Google Charts -->
  <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>

  <!-- Font Awesome for icons -->
  <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>

  <style>
    * { margin:0; padding:0; box-sizing:border-box; }
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #0f2027, #203a43, #2c5364);
      color: #f0f8ff;
      min-height: 100vh;
      padding: 20px;
    }

    .wrapper { max-width: 1200px; margin:0 auto; }

    .header {
      display:flex; justify-content:space-between; align-items:center;
      margin-bottom:25px;
    }

    .header h2 { font-weight:700; font-size:28px; color:#ffffff; }
    .logout {
      background:#e74c3c; color:#fff; padding:10px 18px; border-radius:6px; text-decoration:none; font-weight:600;
      transition: all 0.3s ease;
    }
    .logout:hover { background:#c0392b; }

    .nav-tabs {
      display:flex; gap:10px; margin-bottom:25px; border-bottom:2px solid rgba(255,255,255,0.2); padding-bottom:10px;
    }
    .tab-btn {
      background:none; border:none; font-size:16px; padding:10px 20px; cursor:pointer; font-weight:bold;
      color: rgba(255,255,255,0.6); border-bottom:3px solid transparent; transition: all 0.3s;
    }
    .tab-btn.active { color:#00c6ff; border-bottom:3px solid #00c6ff; }

    .section { display:none; }
    .section.active { display:block; }

    .dashboard-grid { display:flex; flex-wrap:wrap; gap:20px; }
    .col-left { flex:3; min-width:300px; }
    .col-right { flex:1; min-width:250px; }

    .card {
      background: rgba(255,255,255,0.05);
      backdrop-filter: blur(10px);
      padding:20px;
      border-radius:12px;
      box-shadow: 0 8px 20px rgba(0,0,0,0.2);
      margin-bottom:20px;
      color:#f0f8ff;
    }

    h3 { margin-bottom:15px; font-size:18px; font-weight:600; display:flex; align-items:center; gap:8px; }

    .chart-box { height:250px; }

    table {
      width:100%; border-collapse:collapse; margin-top:10px; background: rgba(255,255,255,0.1); border-radius:8px; overflow:hidden;
    }
    th, td { padding:10px; text-align:left; }
    th { background:#1b2838; color:#ffffff; }
    td { border-bottom:1px solid rgba(255,255,255,0.2); }

    .btn-inv, .btn-del, .btn-add {
      padding:6px 12px; border:none; border-radius:6px; cursor:pointer; font-weight:600; transition: all 0.3s;
      color:#fff;
    }
    .btn-inv { background:#2980b9; }
    .btn-inv:hover { background:#1c5980; }
    .btn-del { background:#e74c3c; }
    .btn-del:hover { background:#c0392b; }
    .btn-add { background:#27ae60; width:100%; margin-top:10px; }
    .btn-add:hover { background:#1f8a4d; }

    .role-badge { padding:4px 10px; border-radius:12px; font-size:12px; font-weight:600; }
    .role-ADMIN { background:#8e44ad; color:#fff; }
    .role-RECEPTIONIST { background:#27ae60; color:#fff; }

    input, select { width:100%; padding:10px; margin-bottom:5px; border:1px solid rgba(255,255,255,0.2); border-radius:6px; background:rgba(255,255,255,0.05); color:#f0f8ff; }

    @media(max-width:768px){
      .dashboard-grid { flex-direction:column; }
    }
  </style>
</head>

<body>

<div class="wrapper">
  <div class="header">
    <h2><i class="fas fa-tachometer-alt"></i> Admin Dashboard</h2>
    <a href="#" onclick="logout()" class="logout"><i class="fas fa-sign-out-alt"></i> Logout</a>
  </div>

  <div class="nav-tabs">
    <button class="tab-btn active" onclick="switchTab('analytics')"><i class="fas fa-chart-bar"></i> Analytics & Invoices</button>
    <button class="tab-btn" onclick="switchTab('users')"><i class="fas fa-users"></i> User Management</button>
  </div>

  <!-- ANALYTICS SECTION -->
  <div id="analytics" class="section active">
    <div class="dashboard-grid">
      <div class="col-left">
        <div class="card">
          <h3><i class="fas fa-chart-line"></i> Revenue Overview</h3>
          <div id="barchart" class="chart-box">Loading Chart...</div>
        </div>

        <div class="card">
          <h3><i class="fas fa-receipt"></i> Recent Bookings & Invoices</h3>
          <table>
            <thead>
            <tr><th>ID</th><th>Guest</th><th>Room</th><th>Dates</th><th>Action</th></tr>
            </thead>
            <tbody id="invBody"><tr><td colspan="5">Loading data...</td></tr></tbody>
          </table>
        </div>
      </div>

      <div class="col-right">
        <div class="card">
          <h3><i class="fas fa-bed"></i> Room Popularity</h3>
          <div id="piechart" style="height:200px;">Loading...</div>
        </div>

        <div class="card" style="border-top:4px solid #e74c3c;">
          <h3><i class="fas fa-wallet"></i> Add Expense</h3>
          <form onsubmit="addExpense(event)">
            <label>Category</label>
            <select id="exCat">
              <option>Utilities</option>
              <option>Salaries</option>
              <option>Maintenance</option>
              <option>Marketing</option>
              <option>Other</option>
            </select>

            <label>Amount ($)</label>
            <input type="number" id="exAmount" step="0.01" required>

            <button type="submit" class="btn-del">Record Expense</button>
          </form>
        </div>

        <div class="card" style="background:#1b2838;">
          <h3><i class="fas fa-coins"></i> Net Profit</h3>
          <h1 id="profitDisplay">Loading...</h1>
          <small id="expenseDisplay">Expenses: $0.00</small>
        </div>
      </div>
    </div>
  </div>

  <!-- USER MANAGEMENT SECTION -->
  <div id="users" class="section">
    <div class="dashboard-grid">
      <div class="col-right">
        <div class="card" style="border-top:4px solid #2980b9;">
          <h3><i class="fas fa-user-plus"></i> Add User</h3>
          <form onsubmit="addUser(event)">
            <label>Name</label><input type="text" id="uName" required>
            <label>Email</label><input type="email" id="uEmail" required>
            <button type="submit" class="btn-add">Create User</button>
          </form>
        </div>
      </div>

      <div class="col-left">
        <div class="card">
          <h3><i class="fas fa-users-cog"></i> System Users</h3>
          <table>
            <thead>
            <tr><th>ID</th><th>Name</th><th>Email</th><th>Role</th><th>Action</th></tr>
            </thead>
            <tbody id="userBody"><tr><td colspan="5">Loading users...</td></tr></tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
  google.charts.load('current', {'packages':['corechart']});
  google.charts.setOnLoadCallback(loadAnalytics);
  loadUsers();

  function switchTab(tabId) {
    document.querySelectorAll('.section').forEach(el => el.classList.remove('active'));
    document.querySelectorAll('.tab-btn').forEach(el => el.classList.remove('active'));
    document.getElementById(tabId).classList.add('active');
    event.currentTarget.classList.add('active');
  }

  // Existing JS functions remain unchanged (loadAnalytics, addExpense, loadUsers, addUser, deleteUser, logout, printInv)
</script>
</body>
</html>
